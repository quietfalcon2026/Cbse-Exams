<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Birthday for Vaani</title>
    <style>
        :root {
            --cherry-bg: #fff0f3;
            --deep-pink: #ff4d6d;
            --soft-pink: #ff85a1;
            --sky-blue: #a2d2ff;
        }

        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background-color: var(--cherry-bg);
            font-family: 'Comic Sans MS', cursive, sans-serif;
        }

        .falling-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .page {
            display: none;
            width: 100vw;
            height: 100vh;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            z-index: 1;
        }

        .active { display: flex; }

        /* Page 1: Original Style */
        .tree-container { text-align: center; cursor: pointer; }
        .tree-svg { width: 280px; height: auto; }
        .tap-text { color: var(--deep-pink); margin-top: 10px; font-size: 18px; }

        /* Page 2: Landscape & Fireworks */
        #page2 { background: linear-gradient(to bottom, #000814, #001d3d); }
        
        .landscape {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 40%;
            z-index: 2;
        }

        /* Simple SVG Mountains and River */
        .mountain-svg {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 100%;
        }

        .wish-container {
            position: relative;
            z-index: 10;
            text-align: center;
            padding: 20px;
        }

        .wish-text {
            font-size: 2.2rem;
            font-weight: bold;
            display: inline-block;
            animation: colorChange 3s infinite;
        }

        @keyframes colorChange {
            0% { color: #ff85a1; }
            33% { color: #ffe162; }
            66% { color: #9bf6ff; }
            100% { color: #ff85a1; }
        }

        .rocket-btn { font-size: 60px; background: none; border: none; cursor: pointer; z-index: 11; }

        /* Annoying Flower Button */
        .flower-btn {
            display: none;
            position: absolute;
            width: 130px;
            height: 130px;
            background: var(--deep-pink);
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            font-weight: bold;
            z-index: 20;
            align-items: center;
            justify-content: center;
            text-align: center;
            box-shadow: 0 0 20px rgba(255, 77, 109, 0.6);
            transition: all 0.1s ease;
        }
        
        .flower-btn::before {
            content: "‚úø";
            position: absolute;
            font-size: 180px;
            color: var(--soft-pink);
            z-index: -1;
            opacity: 0.7;
        }

        /* Page 3: Video Sizing */
        #bdayVideo {
            width: 75%; 
            max-width: 350px;
            border-radius: 15px;
            border: 5px solid var(--deep-pink);
            background: #000;
        }

        .final-poem {
            display: none;
            margin-top: 20px;
            padding: 15px;
            color: var(--deep-pink);
            text-align: center;
            font-size: 1.1rem;
            animation: fadeIn 2s;
        }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        canvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; pointer-events: none; }
    </style>
</head>
<body>

    <div class="falling-container" id="fallZone"></div>

    <div id="page1" class="page active" onclick="goToPage(2)">
        <div class="tree-container">
            <svg class="tree-svg" viewBox="0 0 200 200">
                <path d="M100 180 Q100 100 130 50 M100 160 Q70 110 50 80 M100 140 Q120 120 150 110" stroke="#4b2c20" stroke-width="8" fill="none" stroke-linecap="round"/>
                <circle cx="130" cy="50" r="25" fill="#ffb7c5" opacity="0.8"/>
                <circle cx="50" cy="80" r="20" fill="#ffb7c5" opacity="0.8"/>
                <circle cx="150" cy="110" r="15" fill="#ff85a1" opacity="0.8"/>
                <circle cx="100" cy="70" r="30" fill="#ffc0cb" opacity="0.8"/>
            </svg>
            <div class="tap-text">Tap the tree üå∏</div>
        </div>
    </div>

    <div id="page2" class="page">
        <canvas id="fwCanvas"></canvas>
        
        <div class="landscape">
            <svg class="mountain-svg" viewBox="0 0 500 200" preserveAspectRatio="none">
                <path d="M0 200 L150 50 L300 200 Z" fill="#1b263b" />
                <path d="M200 200 L350 80 L500 200 Z" fill="#0d1b2a" />
                <path d="M0 200 Q250 150 500 200 L500 250 L0 250 Z" fill="#415a77" />
            </svg>
        </div>

        <button class="rocket-btn" id="rocket" onclick="launchShow()">üöÄ</button>
        
        <div class="wish-container" id="wishContainer" style="display:none;">
            <div class="wish-text">Wish you a happy birthday Vaani üå∏</div>
        </div>

        <button id="giftBtn" class="flower-btn" onclick="goToPage(3)">a gift for my bestie üéÅ</button>
    </div>

    <div id="page3" class="page">
        <video id="bdayVideo" controls>
            <source src="birthday-video.mp4.mp4" type="video/mp4">
        </video>
        <div id="poemText" class="final-poem">
            "A hand to hold, a heart to share,<br>
            A constant love that‚Äôs always there.<br>
            Through every laugh and every tear,<br>
            I‚Äôm glad to have a sister near."<br><br>
            <strong>Wish you a happy birthday bestie! üíñ</strong>
        </div>
    </div>

    <script>
        function goToPage(num) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById('page' + num).classList.add('active');
            
            if(num === 2) stopFalling(); 
            if(num === 3) {
                startFalling();
                const video = document.getElementById('bdayVideo');
                video.onended = () => {
                    document.getElementById('poemText').style.display = 'block';
                };
            }
        }

        // Falling Effects
        const fallZone = document.getElementById('fallZone');
        let fallInterval;
        function startFalling() {
            fallInterval = setInterval(() => {
                const item = document.createElement('div');
                item.innerHTML = Math.random() > 0.5 ? 'üå∏' : 'üíó';
                item.style.cssText = `position:absolute; left:${Math.random()*100}%; top:-50px; font-size:${Math.random()*20+15}px; transition:transform 4s linear; z-index:0;`;
                fallZone.appendChild(item);
                setTimeout(() => { item.style.transform = `translateY(110vh) rotate(${Math.random()*360}deg)`; }, 100);
                setTimeout(() => item.remove(), 4500);
            }, 300);
        }
        function stopFalling() { clearInterval(fallInterval); fallZone.innerHTML = ''; }
        startFalling();

        // Fireworks & Show
        function launchShow() {
            document.getElementById('rocket').style.display = 'none';
            document.getElementById('wishContainer').style.display = 'block';
            initFireworks();
            
            const giftBtn = document.getElementById('giftBtn');
            setTimeout(() => {
                giftBtn.style.display = 'flex';
                giftBtn.style.top = '70%';
            }, 2000);

            // Annoying Movement
            giftBtn.onmouseover = giftBtn.ontouchstart = () => {
                giftBtn.style.left = Math.random() * 60 + 10 + '%';
                giftBtn.style.top = Math.random() * 60 + 10 + '%';
            };
        }

        function initFireworks() {
            const canvas = document.getElementById('fwCanvas');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            let particles = [];

            function createFirework(x, y) {
                const colors = ['#ff0054', '#ffbd00', '#9ef01a', '#00f5d4', '#7209b7'];
                const color = colors[Math.floor(Math.random() * colors.length)];
                for (let i = 0; i < 40; i++) {
                    particles.push({
                        x, y,
                        vx: (Math.random() - 0.5) * 10,
                        vy: (Math.random() - 0.5) * 10,
                        color,
                        alpha: 1
                    });
                }
            }

            function animate() {
                ctx.fillStyle = 'rgba(0, 8, 20, 0.2)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                particles.forEach((p, i) => {
                    p.x += p.vx; p.y += p.vy; p.alpha -= 0.015;
                    ctx.globalAlpha = p.alpha;
                    ctx.fillStyle = p.color;
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, 2, 0, Math.PI * 2);
                    ctx.fill();
                    if (p.alpha <= 0) particles.splice(i, 1);
                });
                if (Math.random() < 0.08) createFirework(Math.random() * canvas.width, Math.random() * canvas.height * 0.6);
                requestAnimationFrame(animate);
            }
            animate();
        }
    </script>
</body>
</html>